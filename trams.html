<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="manifest" href="/manifest.json" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>London Trams | Trackle™</title>
    <meta name="theme-color" content="#5fb526" />
    <link
      rel="icon"
      type="image/x-icon"
      href="/logo.png"
    />

    <style>
      iframe {
        border: none;
        width: 100%;
        height: 100%;
      }
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
      }
    </style>
    <script>
      function updateThemeColor() {
        const metaThemeColor = document.querySelector(
          "meta[name='theme-color']"
        );
        const isDarkMode = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;

        // Update the content based on the current theme
        if (isDarkMode) {
          metaThemeColor.setAttribute("content", "#2A8201"); // Dark purple for dark theme
        } else {
          metaThemeColor.setAttribute("content", "#5fb526"); // Original purple for light theme
        }
      }

      // Run the function to set the initial theme color
      updateThemeColor();

      // Listen for changes in theme preference
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", updateThemeColor);
    </script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script
      src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <link rel="stylesheet" href="/trams/style.css" />
    <script src="/trams/main.js" type="text/javascript"></script>
    <script src="/trams/places.js" type="text/javascript"></script>
    <script src="/trams/game.js" type="text/javascript"></script>
    <script>
      window.onload = loadPage;
    </script>
  </head>
  <body>
    <div class="game">
      <div class="header">
        <div id="instructions">
          <h1>Trackle™ - London Trams</h1>
          <h2>How many London Trams stops can you guess?</h2>
        </div>
      </div>

      <div id="mapContainer">
        <div id="map"></div>
        <div class="formContainer">
          <div class="form">
            <input id="guess" type="text" placeholder="Enter a stop" />
            <button class="enterButton" onclick="enterGuess()">Guess</button>
            <button class="resetButton" onclick="app.resetGame()">
              Reset Game
            </button>
            <button
              class="websiteButton"
              onclick="window.top.location.href='/home.html'"
            >
              Exit Game
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="pageOverlay">
      <div id="scoreContainer">
        Your score:
        <strong><span id="score"></span> / <span id="total"></span></strong>
      </div>
      <div class="credits">
        <p>
          ©️ SB Designs 2024:
          <u>
            <a
              href="https://sbdesigns.pages.dev"
              style="text-decoration: none; color: inherit"
              >Website</a
            >
          </u>
        </p>
      </div>
    </div>
  </body>
</html>
